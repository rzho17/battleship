(()=>{"use strict";const t=class{constructor(t,e,o){this.length=t,this.hits=e,this.sunk=o}isHit(){return this.hits+=1}isSunk(){return this.hits===this.length&&(this.sunk=!0)}},e=t=>{let e=0;for(let o=0;o<10;o++){for(let o=0;o<10;o++){const a=document.createElement("div");t.appendChild(a),a.className="gridSquare",a.dataset.gridPosition=`${e}${o}`}e++}},o=(t,e,o,a)=>{document.querySelector(`.${a} [data-grid-position="${t}${e}"]`).style.backgroundColor=o},a=(e,a)=>{for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)e[r][i]instanceof t&&o([r],[i],"orange",a),"x"===e[r][i]?o([r],[i],"red",a):"o"===e[r][i]&&o([r],[i],"grey",a)},r=e,i=class{constructor(){this.board=this.createBoard()}createBoard(){const t=[];for(let e=0;e<10;e++){const e=[];for(let t=0;t<10;t++)e.push(null);t.push(e)}return t}checkShip(e,o,a){const r=o[0],i=o[1],n=10-e.length>=i,s=10-e.length>=r;let l=!1;if("x"===a&&n)for(let o=0;o<e.length;o++)this.board[r][i+o]instanceof t&&(l=!0);if("y"===a&&s)for(let o=0;o<e.length;o++)this.board[r+o][i]instanceof t&&(l=!0);return l}placeShip(t,e,o){const a=e[0],r=e[1],i=10-t.length>=r,n=10-t.length>=a;if(!1===this.checkShip(t,e,o)){if("x"===o&&i)for(let e=0;e<t.length;e++)this.board[a][r+e]=t;if("y"===o&&n)for(let e=0;e<t.length;e++)this.board[a+e][r]=t}}receiveAttack(e){const o=e[0],a=e[1];let r=this.board[o][a];if(r instanceof t&&(r.isHit(),r.hits===r.length&&r.isSunk(),this.board[o][a]="x"),null===r&&(this.board[o][a]="o"),"x"===r)return"invalid move"}findValidPosition(){for(let t=0;t<this.board.length;t++)for(let e=0;e<this.board[t].length;e++)"o"===this.board[t][e]||this.board[t][e]}allShipsSunk(){for(let e=0;e<this.board.length;e++)for(let o=0;o<this.board[e].length;o++)if(this.board[e][o]instanceof t)return!1;return!0}},n=class{constructor(e,o){this.gameBoard=new i,this.carrier=new t(5,0,!1),this.battleship=new t(4,0,!1),this.destroyer=new t(3,0,!1),this.submarine=new t(3,0,!1),this.patrolBoat=new t(2,0,!1),this.shipHolder=[this.carrier,this.battleship,this.destroyer,this.submarine,this.patrolBoat]}placeShip(t,e,o){this.gameBoard.placeShip(t,e,o)}receiveAttack(t){this.gameBoard.receiveAttack(t)}computerAttack(){const t=Math.floor(10*Math.random()),e=Math.floor(10*Math.random());"o"===this.gameBoard.board[t][e]&&"x"===this.gameBoard.board[t][e]||this.receiveAttack([t,e])}},s=document.querySelector(".playerBoard"),l=document.querySelector(".computerBoard");r(s),r(l);const c=new n;new n,(t=>{const o=document.querySelector("main"),r=document.createElement("div");r.className="loadContainer";const i=document.createElement("div");i.className="loadInfo";const n=document.createElement("h2");n.className="loadTitle",n.innerText="Let's play Battleship!";const s=document.createElement("div");s.className="displayShip",s.innerText="Place your ship(change ship name)";const l=document.createElement("button");l.className="rotateBtn",l.innerText="Rotate Ship";const c=document.createElement("div");c.className="gameBoard initialBoard",e(c),i.append(n,s,l,c),r.append(i),o.append(r),(t=>{const e=document.querySelectorAll(".initialBoard .gridSquare"),o=document.querySelector(".rotateBtn");let r="x";o.addEventListener("click",(()=>{r=(t=>"x"===t?"y":"x")(r),console.log(r)})),e.forEach((e=>{e.addEventListener("click",(e=>{const o=(c=e.target.dataset.gridPosition,[parseInt(c[0]),parseInt(c[1])]),i=t.shipHolder[0],n=10-i.length>=o[1],s=10-i.length>=o[0],l=!1===t.gameBoard.checkShip(i,o,r);var c;console.log(o),"x"===r&&n&&l&&(t.placeShip(t.shipHolder.shift(),o,r),console.log(i),console.log(t.gameBoard.board),a(t.gameBoard.board,"initialBoard")),"y"===r&&s&&l&&(t.placeShip(t.shipHolder.shift(),o,r),console.log(i),console.log(t.gameBoard.board),a(t.gameBoard.board,"initialBoard"))}))}))})(t)})(c)})();