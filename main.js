(()=>{"use strict";const t=class{constructor(t,e,r){this.length=t,this.hits=e,this.sunk=r}isHit(){return this.hits+=1}isSunk(){return this.hits===this.length&&(this.sunk=!0)}},e=t=>[parseInt(t[0]),parseInt(t[1])],r=(t,e,r,o)=>{const a=document.querySelector(`.${o} [data-grid-position="${t}${e}"]`);a.classList.add("ship"),a.style.backgroundColor=r},o=(e,o)=>{for(let a=0;a<e.length;a++)for(let i=0;i<e[a].length;i++)e[a][i]instanceof t&&r([a],[i],"orange",o),"x"===e[a][i]?r([a],[i],"red",o):"o"===e[a][i]&&r([a],[i],"grey",o)},a=t=>{let e=0;for(let r=0;r<10;r++){for(let r=0;r<10;r++){const o=document.createElement("div");t.appendChild(o),o.className="gridSquare",o.dataset.gridPosition=`${e}${r}`}e++}},i=class{constructor(){this.board=this.createBoard()}createBoard(){const t=[];for(let e=0;e<10;e++){const e=[];for(let t=0;t<10;t++)e.push(null);t.push(e)}return t}checkShip(e,r,o){const a=r[0],i=r[1],s=10-e.length>=i,n=10-e.length>=a;let l=!1;if("x"===o&&s)for(let r=0;r<e.length;r++)this.board[a][i+r]instanceof t&&(l=!0);if("y"===o&&n)for(let r=0;r<e.length;r++)this.board[a+r][i]instanceof t&&(l=!0);return console.log(`i will place ${e.length} @ [${r}] Position ${o}`),l}placeShip(t,e,r){const o=e[0],a=e[1],i=10-t.length>=a,s=10-t.length>=o;if(!1===this.checkShip(t,e,r)){if("x"===r&&i)for(let e=0;e<t.length;e++)this.board[o][a+e]=t;if("y"===r&&s)for(let e=0;e<t.length;e++)this.board[o+e][a]=t}}receiveAttack(e){const r=e[0],o=e[1];let a=this.board[r][o];if(a instanceof t&&(a.isHit(),a.hits===a.length&&a.isSunk(),this.board[r][o]="x"),null===a&&(this.board[r][o]="o"),"x"===a)return"invalid move"}findValidPosition(t,e,r){const o=e[0],a=e[1],i=10-t.length>=a,s=10-t.length>=o;let n=!1;return("x"===r&&!i||"y"===r&&!s)&&(n=!0),n}allShipsSunk(){let e=!0;for(let r=0;r<this.board.length;r++)for(let o=0;o<this.board[r].length;o++)this.board[r][o]instanceof t&&(e=!1);return e}},s=class{constructor(e,r){this.gameBoard=new i,this.carrier=new t(5,0,!1),this.battleship=new t(4,0,!1),this.destroyer=new t(3,0,!1),this.submarine=new t(3,0,!1),this.patrolBoat=new t(2,0,!1),this.shipHolder=[this.carrier,this.battleship,this.destroyer,this.submarine,this.patrolBoat]}placeShip(t,e,r){this.gameBoard.placeShip(t,e,r)}receiveAttack(t){this.gameBoard.receiveAttack(t)}computerAttack(){const t=Math.floor(10*Math.random()),e=Math.floor(10*Math.random());"o"===this.gameBoard.board[t][e]&&"x"===this.gameBoard.board[t][e]||this.receiveAttack([t,e])}},n={coordArr:[[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[1,7],[1,8],[1,9],[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6],[2,7],[2,8],[2,9],[3,0],[3,1],[3,2],[3,3],[3,4],[3,5],[3,6],[3,7],[3,8],[3,9],[4,0],[4,1],[4,2],[4,3],[4,4],[4,5],[4,6],[4,7],[4,8],[4,9],[5,0],[5,1],[5,2],[5,3],[5,4],[5,5],[5,6],[5,7],[5,8],[5,9],[6,0],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],[6,9],[7,0],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6],[7,7],[7,8],[7,9],[8,0],[8,1],[8,2],[8,3],[8,4],[8,5],[8,6],[8,7],[8,8],[8,9],[9,0],[9,1],[9,2],[9,3],[9,4],[9,5],[9,6],[9,7],[9,8],[9,9]]},l=()=>{var t;return(t=Math.floor(Math.random()*n.coordArr.length),n.coordArr.splice(t,1)).flat(1)},c=(()=>{(()=>{const t=document.querySelector(".playerBoard"),e=document.querySelector(".computerBoard");a(t),a(e)})();const r=new s,i=new s;var n,h;return(()=>{for(;i.shipHolder.length>0;){const t=i.shipHolder[0],e=l(),r=1===Math.floor(2*Math.random())?"x":"y";!1===i.gameBoard.checkShip(t,e,r)&&!1===i.gameBoard.findValidPosition(t,e,r)&&(i.placeShip(t,e,r),i.shipHolder.shift())}})(),document.querySelectorAll(".computerBoard .gridSquare ").forEach((t=>{t.addEventListener("click",(t=>{const r=e(t.target.dataset.gridPosition);t.target.classList.contains("ship")||(i.receiveAttack(r),console.log(i.gameBoard.board),c.player.receiveAttack(l()),o(c.player.gameBoard.board,"playerBoard"),!0===c.computer.gameBoard.allShipsSunk()?console.log("player win"):!0===c.player.gameBoard.allShipsSunk()?console.log("computer win"):console.log("nno winner yet"))}))})),n=i.gameBoard.board,h="computerBoard",document.querySelectorAll(`.${h} .gridSquare`).forEach((r=>{r.addEventListener("click",(r=>{const a=e(r.target.dataset.gridPosition),i=a[0],s=a[1];n[i][s]instanceof t&&(r.target.style.backgroundColor="orange"),null===n[i][s]&&(r.target.style.backgroundColor="grey"),o(n,h)}))})),{player:r,computer:i}})()})();