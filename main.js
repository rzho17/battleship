(()=>{"use strict";const t=class{constructor(t,e,r){this.length=t,this.hits=e,this.sunk=r}isHit(){return this.hits+=1}isSunk(){return this.hits===this.length&&(this.sunk=!0)}},e=(t,e,r)=>{const o=document.querySelector(`[data-grid-position="${t}${e}"]`);console.log(o),o.style.backgroundColor=r},r=t=>{let e=0;for(let r=0;r<10;r++){for(let r=0;r<10;r++){const o=document.createElement("div");t.appendChild(o),o.className="gridSquare",o.dataset.gridPosition=`${e}${r}`}e++}},o=class{constructor(){this.board=this.createBoard()}createBoard(){const t=[];for(let e=0;e<10;e++){const e=[];for(let t=0;t<10;t++)e.push(null);t.push(e)}return t}checkShip(e,r,o){const a=r[0],i=r[1],s=10-e.length>=i,n=10-e.length>=a;let c=!1;if("x"===o&&s)for(let r=0;r<e.length;r++)this.board[a][i+r]instanceof t&&(c=!0);if("y"===o&&n)for(let r=0;r<e.length;r++)this.board[a+r][i]instanceof t&&(c=!0);return c}placeShip(t,e,r){const o=e[0],a=e[1],i=10-t.length>=a,s=10-t.length>=o;if(!1===this.checkShip(t,e,r)){if("x"===r&&i)for(let e=0;e<t.length;e++)this.board[o][a+e]=t;if("y"===r&&s)for(let e=0;e<t.length;e++)this.board[o+e][a]=t}}receiveAttack(e){const r=e[0],o=e[1];let a=this.board[r][o];if(a instanceof t&&(a.isHit(),a.hits===a.length&&a.isSunk(),this.board[r][o]="x"),null===a&&(this.board[r][o]="o"),"x"===a)return"invalid move"}findValidPosition(){for(let t=0;t<this.board.length;t++)for(let e=0;e<this.board[t].length;e++)"o"===this.board[t][e]||this.board[t][e]}allShipsSunk(){for(let e=0;e<this.board.length;e++)for(let r=0;r<this.board[e].length;r++)if(this.board[e][r]instanceof t)return!1;return!0}},a=document.querySelector(".playerBoard"),i=document.querySelector(".computerBoard");r(a),r(i);const s=new class{constructor(e){this.gameBoard=new o,this.carrier=new t(5,0,!1),this.battleship=new t(4,0,!1),this.destroyer=new t(3,0,!1),this.submarine=new t(3,0,!1),this.patrolBoat=new t(2,0,!1)}placeShip(t,e,r){this.gameBoard.placeShip(t,e,r)}receiveAttack(t){this.gameBoard.receiveAttack(t)}computerAttack(){const t=Math.floor(10*Math.random()),e=Math.floor(10*Math.random());"o"===this.gameBoard.board[t][e]&&"x"===this.gameBoard.board[t][e]||this.receiveAttack([t,e])}};var n;s.placeShip(s.carrier,[0,0],"x"),s.receiveAttack([0,0]),s.receiveAttack([0,1]),s.receiveAttack([0,2]),s.receiveAttack([8,0]),n=s.gameBoard.board,document.querySelectorAll(".gridSquare").forEach((r=>{r.addEventListener("click",(r=>{var o;((r,o,a)=>{document.querySelector(".playerBoard");const i=o[0],s=o[1];document.querySelectorAll(".gridSquare"),a.target.dataset.gridPosition,r[i][s]instanceof t&&(a.target.style.backgroundColor="red"),null===r[i][s]&&(a.target.style.backgroundColor="grey"),document.querySelector('[data-grid-position="18"]');for(let t=0;t<r.length;t++)for(let o=0;o<r[t].length;o++)"x"===r[t][o]?e([t],[o],"red"):"o"===r[t][o]&&e([t],[o],"grey")})(n,(o=r.target.dataset.gridPosition,[parseInt(o[0]),parseInt(o[1])]),r)}))}))})();